<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iracema Scrollytelling</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background: #1a1a1a; color: #fff; }

        .scrolly-container {
            display: flex;
            position: relative;
        }

        /* Lado Visual Fixo */
        .visual-monitor {
            position: sticky;
            top: 0;
            width: 50%;
            height: 100vh;
            background: #000;
        }

        .visual-item {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            object-fit: cover;
        }

        /* Classe que o JS vai ativar */
        .visual-item.active {
            opacity: 1;
        }

        /* Lado do Texto */
        .content-scroll {
            width: 50%;
            padding: 0 5%;
        }

        .step {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 40px;
            border-left: 2px solid rgba(255, 255, 255, 0.1);
        }

        .step h1 { font-size: 3.5rem; margin-bottom: 20px; color: #f1c40f; }
        .step p { font-size: 1.4rem; line-height: 1.6; color: #ddd; max-width: 500px; }

        /* Ajuste para o Iframe do Mapa */
        iframe.visual-item { border: none; filter: grayscale(0.5) invert(0.9); }
    </style>
</head>
<body>

<div class="scrolly-container">
    <div class="visual-monitor">
        <img src="https://images.unsplash.com/photo-1590508591873-1085078a6e43?auto=format&fit=crop&w=1000&q=80" 
             class="visual-item active" data-step="intro">
        
        <iframe class="visual-item" data-step="ponte"
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3981.365313175865!2d-38.5173163!3d-3.7181636!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7c748466b04b901%3A0x600b467c69996d93!2sPonte%20dos%20Ingleses!5e0!3m2!1spt-BR!2sbr!4v1700000000000">
        </iframe>

        <img src="https://images.unsplash.com/photo-1516301138275-f37089196b04?auto=format&fit=crop&w=1000&q=80" 
             class="visual-item" data-step="boemia">
    </div>

    <div class="content-scroll">
        <section class="step" id="intro">
            <h1>Iracema</h1>
            <p>Onde o mito encontra o mar. A estátua da Iracema Guardiã observa o horizonte, simbolizando a força da cultura cearense.</p>
        </section>

        <section class="step" id="ponte">
            <h1>A Ponte</h1>
            <p>A Ponte dos Ingleses foi porta de entrada para o progresso. Hoje, o mapa mostra sua localização privilegiada no bairro mais charmoso de Fortaleza.</p>
        </section>

        <section class="step" id="boemia">
            <h1>Noite</h1>
            <p>Quando o sol se põe, as luzes do Dragão do Mar se acendem. A boemia toma conta das ruas históricas com cores e ritmos únicos.</p>
        </section>
    </div>
</div>

<script>
    // Selecionamos todos os passos de texto e todas as imagens/mapas
    const steps = document.querySelectorAll('.step');
    const visuals = document.querySelectorAll('.visual-item');

    // Opções do observador: dispara quando 60% do elemento está na tela
    const options = {
        threshold: 0.6
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const stepId = entry.target.id;

                // Remove a classe 'active' de todos os visuais
                visuals.forEach(visual => visual.classList.remove('active'));

                // Adiciona 'active' apenas ao visual que corresponde ao ID do texto
                const activeVisual = document.querySelector(`.visual-item[data-step="${stepId}"]`);
                if (activeVisual) activeVisual.classList.add('active');
            }
        });
    }, options);

    // Começa a observar cada seção de texto
    steps.forEach(step => observer.observe(step));
</script>

</body>
</html>
